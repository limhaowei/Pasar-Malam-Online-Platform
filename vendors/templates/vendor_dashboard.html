{% extends 'main.html' %} {% load static %} {% block content %}

<div class="notifications">
  <h2>Notifications</h2>
  <ul>
    {% for notification in notifications %}
    <li>
      {{ notification.message }} ({{ notification.created_at }})
      <a
        href="#"
        class="mark-as-read"
        data-notification-id="{{ notification.id }}"
        >Mark as read</a
      >
    </li>
    {% empty %}
    <li>No notifications</li>
    {% endfor %}
  </ul>
  <p><a href="{% url 'edit_vendor_page' %}">Edit Your Vendor Page</a></p>
</div>

<!-- JavaScript to mark notifications as read -->
<script>
  $(document).ready(function () {
    $(".mark-as-read").on("click", function () {
      var notificationId = $(this).data("notification-id");
      $.ajax({
        type: "POST",
        url: '{% url "mark_notification_as_read" %}',
        data: { notification_id: notificationId },
        success: function () {
          $(this).parent().remove();
        },
      });
    });
  });
</script>

{% endblock %}
