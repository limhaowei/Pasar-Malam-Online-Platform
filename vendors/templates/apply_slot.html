{% extends 'main.html' %} {% load static %} {% block content %}
<section class="light-bg company-details_wrap" id="apply_slot">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-md-10 responsive-wrap">
        <div class="register-wrap">
          <div class="register">
            <h5>Apply for a Slot in Upcoming Lorong Belakang</h5>
          </div>
        </div>
        <div class="register-wrap mt-4">
          <div class="register">
            <form
              aria-label="Slot Registration Form"
              enctype="multipart/form-data"
              id="slotRegistrationForm"
              method="POST"
              onsubmit="submitForm(event)"
            >
              <div class="form-section page active" id="page1">
                <h5>Slot and Package Details</h5>
                <hr />
                <p>Session: JULY 2024</p>
                <p>Time: 4PM - 12AM</p>
                <p>
                  Location : Lorong Belakang Cyberjaya @Shaftsbury Square,
                  Cyberjaya
                </p>
                <hr />
                <p>Booth Price (Package):</p>
                <ol>
                  <li>
                    <strong>FNB Platinum</strong> - RM 100/LOT<br />
                    Package includes:
                    <ul>
                      <li>Push Cart</li>
                      <li>Chairs (2 units)</li>
                    </ul>
                    Limited to 25 slots only (Lots are located in the first 25
                    sites from the main entrance. LOT NO. A01 - A25 and B1 -
                    B20)
                  </li>
                  <li>
                    <strong>FNB Gold</strong> - RM 80/LOT<br />
                    Package includes:
                    <ul>
                      <li>Push Cart</li>
                    </ul>
                    Limited to 15 slots only (Lots are located in the first 25
                    sites from the main entrance. LOT NO. A26 - A40)
                  </li>
                  <li>
                    <strong>Silver (NON FNB ONLY)</strong> - RM50/LOT
                    <br />
                    Package limited to 60 slots only (LOT NO. B31 - B90)<br />
                    Site Size: 8X8 Feet
                  </li>
                </ol>
                <p>
                  *The management will issue a list of selected vendors no later
                  than Thursday each week in the vendor communication group.
                  Only selected vendors can make payments.Payment must be made
                  before Friday at 12 noon.*
                </p>
                <hr />
                Lot Size: 8 feet x 6 feet <br />
                Facilities provided:
                <ul>
                  <li>
                    Electric plug (must bring "extension cable" minimum 10
                    meters long)
                  </li>
                  <li>Surau (P3 level)</li>
                  <li>Toilets (every level)</li>
                  <li>Paid parking (*please prepare Touch 'n Go card*)</li>
                </ul>
                <p>
                  Vendors are advised to bring their own lights to decorate the
                  business site to be brighter and more attractive at night.
                </p>

                <div class="button-section">
                  <br />
                  <button class="btn btn-danger" onclick="nextPage(event, 1)">
                    Next
                  </button>
                </div>
              </div>

              <div class="form-section page" id="page2">
                <h5>Terms and Conditions</h5>
                <hr />
                <ol>
                  <li>
                    Open for sale items based on used goods, clothing, gadget
                    accessories, equipment, and services.
                    <ul>
                      <li>Used clothes "bundle"</li>
                      <li>
                        Street food (eg: putu bambu, Lok lok, Keropok lekor,
                        Churos, Takoyaki, Pisang Goreng Cheese, Lokching,
                        Fruits, Drinking water/fruit juice)
                      </li>
                      <li>F&B (in package)</li>
                      <li>Personal collection items and Antiques</li>
                      <li>Preloved or bundle</li>
                      <li>Used goods</li>
                      <li>Gadgets and electronicsn package)</li>
                      <li>Jewelry and Hobby Items</li>
                      <li>Art and Decoration Service</li>
                      <li>Vehicle accessories</li>
                      <li>Carpentry and Service</li>
                    </ul>
                  </li>
                  <li>
                    Lots are limited; Lot numbers will be assigned to vendors
                    based on Product Suitability categories: F&B and Non-F&B
                    (premium/regular). Vendors can start entering the sales site
                    starting at 2 PM.
                  </li>
                  <li>
                    All vendors must comply with the following S.O.P:
                    <ul>
                      <li>
                        Maintain social distance between traders and customers.
                      </li>
                      <li>Wear a mouth and nose cover (face mask).</li>
                      <li>Ensure that the site is always clean and tidy.</li>
                    </ul>
                  </li>
                  <li>
                    Any payment for booking will not be returned to the vendor
                    if the vendor is not present on the appointed day.<br />
                    <ul>
                      <li>
                        The vendor needs to renew the site booking if they are
                        NOT PRESENT on the already purchased date.
                      </li>
                      <li>
                        Vendors need to register anew to continue opening the
                        bazaar in the Back Lane for another date.
                      </li>
                    </ul>
                  </li>
                  <li>
                    A cleaning charge will be applied to each lot that enters
                    the business site on the day of the bazaar event.<br />
                    <ul>
                      <li>Vendors can leave plastic waste at the site.</li>
                      <li>
                        The cleaning staff will ensure that the vendor's site is
                        left in a clean condition before and after business
                        hours.
                      </li>
                    </ul>
                  </li>
                  <li>
                    The entrance to the Lorong Belakang site will be completely
                    closed at 3:30 PM.
                    <ul>
                      <li>
                        Vendors are not allowed to bring vehicles past the sales
                        site road.
                      </li>
                      <li>
                        After 3:30 PM, loading goods must go through the main
                        entrance (myNEWS.com).
                      </li>
                    </ul>
                  </li>
                </ol>
                <div class="button-section">
                  <br />
                  <button class="btn btn-danger" onclick="prevPage(event, 2)">
                    Previous
                  </button>
                  <button class="btn btn-danger" onclick="nextPage(event, 2)">
                    Next
                  </button>
                </div>
              </div>

              <div class="form-section page" id="page3">
                <label for="slotOption">Slot Date and Package:</label>
                <select
                  class="input-field"
                  id="slotOption"
                  name="slotOption"
                  required
                >
                  <option value="Day 1 - Platinum">
                    Day 1 - Platinum RM 100 (F&B only)
                  </option>
                  <option value="Day 1 - Gold">Day 1 - Gold RM 80</option>
                  <option value="Day 1 - Silver">
                    Day 1 - Silver RM 50 (Non F&B only)
                  </option>
                  <option value="Day 2 - Platinum">
                    Day 2 - Platinum RM 100 (F&B only)
                  </option>
                  <option value="Day 2 - Gold">Day 2 - Gold RM 80</option>
                  <option value="Day 2 - Silver">
                    Day 2 - Silver RM 50 (Non F&B only)
                  </option>
                </select>

                <br />
                <label for="equipmentList">Equipment List: </label>
                <ol>
                  <li>Fan / Light</li>
                  <li>Electric Rice Pot</li>
                  <li>Oven</li>
                  <li>Heater / Steamer</li>
                  <li>Electric Fryer</li>
                  <li>Toasters</li>
                  <li>Waffle Makers</li>
                </ol>
                <br />
                <p>
                  * Please ensure that only items already declared are brought.
                  If additional devices/equipment that have not been declared
                  are found, the vendor will face a penalty of RM200 or those
                  items will be confiscated.
                </p>
                <p>Enter None if nothing is required to be declared.</p>
                <textarea
                  class="input-field-big"
                  id="equipmentList"
                  name="equipmentList"
                  required
                  rows="2"
                ></textarea>

                <div class="button-section">
                  <br />
                  <button class="btn btn-danger" onclick="prevPage(event, 3)">
                    Previous
                  </button>
                  <button class="btn btn-danger" onclick="nextPage(event, 3)">
                    Next
                  </button>
                </div>
              </div>

              <div class="form-section page" id="page4">
                <h5>Review Your Information</h5>
                <hr />
                <div id="review-info"></div>
                <hr />
                <p>By submitting, you agree to our Terms and Conditions.</p>
                <div class="button-section">
                  <br />
                  <button class="btn btn-danger" onclick="prevPage(event, 4)">
                    Previous
                  </button>
                  <button class="btn btn-danger" type="submit">Submit</button>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  function nextPage(event, current) {
    event.preventDefault();

    if (!validatePage(current)) {
      alert("Please fill out all required fields.");
      return;
    }

    if (current === 3) {
      displayReviewInfo();
    }

    document.getElementById("page" + current).classList.remove("active");
    document.getElementById("page" + (current + 1)).classList.add("active");
  }

  function prevPage(event, current) {
    event.preventDefault();

    document.getElementById("page" + current).classList.remove("active");
    document.getElementById("page" + (current - 1)).classList.add("active");
  }

  function displayReviewInfo() {
    const reviewInfoDiv = document.getElementById("review-info");

    const slotOption = document.getElementById("slotOption").value;
    const equipmentList = document.getElementById("equipmentList").value;

    reviewInfoDiv.innerHTML = `
        <p><strong>Slot Date and Package:</strong> ${slotOption}</p>
        <p><strong>Equipment List:</strong></p>
        <pre>${equipmentList}</pre>
        `;
  }

  function validatePage(pageNumber) {
    const page = document.getElementById(`page${pageNumber}`);
    const inputs = page.querySelectorAll("input, textarea, select");
    let isValid = true;

    inputs.forEach((input) => {
      if (!input.checkValidity()) {
        isValid = false;
      }
    });

    return isValid;
  }

  function submitForm(event) {
    event.preventDefault();

    const form = document.getElementById("slotRegistrationForm");
    const formData = new FormData(form);

    fetch("/register", {
      method: "POST",
      body: formData,
    })
      .then((response) => response.json())
      .then((data) => {
        if (data.success) {
          alert("Application successful!");
          window.location.href = "/vendors";
        } else {
          alert("Application failed. Please try again.");
        }
      })
      .catch((error) => {
        console.error("Error:", error);
        alert("Application failed. Please try again.");
      });
  }
</script>

{% endblock %}
